[build]

FIX: Including the outer 'ecowatch' folder in the base path to match the repository structure

base    = "ecowatch/frontend"

Functions directory (relative to the repository root)

NOTE: The functions folder must be at /ecowatch/functions/ in your repository root

functions = "functions"

Build command to execute (relative to the base directory)

command = "npm run build"

Publish directory (relative to the base directory, which is now 'ecowatch/frontend')

publish = "build"

Configuration for Functions Runtime Environment

[functions]
node_bundler = "esbuild"

CRITICAL: API Endpoint Rewrites (for Netlify to call the functions securely)

[[redirects]]
from = "/api/v1/environment/current"
to = "/.netlify/functions/get-current"
status = 200

[[redirects]]
from = "/api/v1/environment/forecast"
to = "/.netlify/functions/get-forecast"
status = 200

OPTIONAL: Single Page App (SPA) Fallback for React routing

[[redirects]]
from = "/*"
to = "/index.html"
status = 200
